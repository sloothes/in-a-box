<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<title>boilerplate in-a-box (v4.2.1)</title>

		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/bootbox-dialoges.css">
		<link rel="stylesheet" href="/css/side-panels.css">
		<link rel="stylesheet" href="/css/meter.css">
		<link rel="stylesheet" href="/css/messg.css" >
		<link rel="stylesheet" href="/css/spectrum.css">
		<link rel="stylesheet" href="/css/colorpicker.css">
		<link rel="stylesheet" href="/css/spinner.css">
		<link rel="stylesheet" href="/css/jquery-ui.css">
		<link rel="stylesheet" href="/css/alerts.css">
		<link rel="stylesheet" href="/css/panel-ui.css">
		<link rel="stylesheet" href="/css/anywhere3d.css">
		<link rel="stylesheet" href="/css/jquery.Jcrop.css">
		<link rel="stylesheet" href="/css/menu-menubar.css">
		<link rel="stylesheet" href="/css/index.css">
		<link rel="stylesheet" href="/style.css">
		<link rel="stylesheet" href="/photoswipe/dist/photoswipe.css">
		<link rel="stylesheet" href="/photoswipe/dist/default-skin/default-skin.css">

		<style>
			body { font-family: Helvetica, Arial, sans-serif; font-size: 12px; background-color: #000; margin: 0px; overflow: hidden; } #edit { position: absolute; bottom: 20px; right: 20px; padding: 8px; color: #555; background-color: #fff; opacity: 0.5; } #edit:hover { cursor: pointer; opacity: 1; } .middle > * { position:absolute; height:fit-content; width:fit-content; top:0; bottom:0; left:0; right:0; margin:auto; }
		</style>

	</head>

	<body ontouchstart="">

		<script src="js/app.js"></script>
		<script src="/three/three.js"></script>

		<!-- includes -->

		<script>

			(function(){

			//  Loading dialog.

				var loadingDialog = document.createElement("div");
				loadingDialog.id = "loading-dialog"
				loadingDialog.classList.add("middle", "text-center");
				loadingDialog.style.cssText = "position:absolute;top:0;left:0;bottom:0;right:0;background:none;z-index:9999;";

				var dialogContent = document.createElement("h2");
				dialogContent.style.cssText = "width:fit-content;font-weight:bold;color:#fff;text-align:center;"
				dialogContent.innerHTML = "Loading" + "<br>" + "Please wait..." + "<br>" + "(heavy duty)";

				loadingDialog.appendChild( dialogContent );
				document.body.appendChild( loadingDialog );

			})();

		//

			var loader = new THREE.XHRLoader();
			loader.load( "app.json", function ( text ) {

				var json = JSON.parse( text );

				var player = new APP.Player();

				player.load( json );
				player.setSize( window.innerWidth, window.innerHeight );
				player.play();

				document.body.appendChild( player.dom );

				if ( json.project.editable === true ) {

					var button = document.createElement( "div" );
					button.id = "edit";
					button.textContent = "OPEN TO EDITOR";
					button.addEventListener( 'click', function ( event ) {

						var url = location.href.split( "/" ).slice( 0, - 1 ).join( "/" );
						window.open( "https://sloothes.com/three/r78/editor/#file=" + url + "/app.json" );

					}, false );

					document.body.appendChild( button );

				}

		//

				window.addEventListener( "resize", function () {
					player.setSize( window.innerWidth, window.innerHeight );
				});

		//

				setTimeout(function(){
					var dialog = document.getElementById("loading-dialog");
					dialog.style.display = "none"; dialog.remove();
				}, 1000);

			});

		/*

			(function(){

			//  Joystick controls.

				var joysticControls1 = document.createElement( "div" );
				var joysticControls2 = document.createElement( "div" );
				joysticControls1.id = "joystick-controls-1";
				joysticControls2.id = "joystick-controls-2";
				joysticControls1.classList.add("joystick-controls");
				joysticControls2.classList.add("joystick-controls");

                document.body.appendChild( joysticControls1 );
                document.body.appendChild( joysticControls2 );

			})();

		*/

		/*
			function bootboxLoading(){

			//  Loading bar.

				var dialog = window.bootbox.dialog({
					message: "<div class=\"text-center\">"
					+ "<h2 style=\"width:fit-content;font-weight:bold;"
					+ "color:#fff;text-align:center;\">Loading<br>"
					+ "Please wait...<br>(heavy duty)</h2></div>",
					buttons: false,
					closeButton: false,
					className: "middle",
				});

				$( dialog.modal() ).find(".modal-content").css({
                    "border"    : "none",
                    "box-shadow": "none",
                    "background": "none",
				});

			}
		*/

		</script>
	</body>
</html>
